
use stack
use heap
use mem


# (::Chunk) => (Len::Int)
label chunk::len
    call stack::swap
    pull ptr

    let ptr be ptr minus 1
    read len from ptr

    push len
    call stack::swap
    return


# (X::Chunk) => (Y::Chunk)
label chunk::copy
    call stack::swap

    call stack::dup
    call chunk::len
    call stack::dup
    call heap::allocate
    call stack::dup
    pull new

    call stack::swap
    call mem::cpy

    push new
    call stack::swap
    return





    
